/*! For license information please see index.min.js.LICENSE.txt */
(()=>{"use strict";const t=window,e=t.ShadowRoot&&(void 0===t.ShadyCSS||t.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,r=Symbol(),n=new WeakMap;class o{constructor(t,e,n){if(this._$cssResult$=!0,n!==r)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const r=this.t;if(e&&void 0===t){const e=void 0!==r&&1===r.length;e&&(t=n.get(r)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),e&&n.set(r,t))}return t}toString(){return this.cssText}}const s=e?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const r of t.cssRules)e+=r.cssText;return(t=>new o("string"==typeof t?t:t+"",void 0,r))(e)})(t):t;var a;const i=window,h=i.trustedTypes,c=h?h.emptyScript:"",l=i.reactiveElementPolyfillSupport,u={toAttribute(t,e){switch(e){case Boolean:t=t?c:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=null!==t;break;case Number:r=null===t?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch(t){r=null}}return r}},d=(t,e)=>e!==t&&(e==e||t==t),m={attribute:!0,type:String,converter:u,reflect:!1,hasChanged:d};class f extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(t){var e;this.finalize(),(null!==(e=this.h)&&void 0!==e?e:this.h=[]).push(t)}static get observedAttributes(){this.finalize();const t=[];return this.elementProperties.forEach(((e,r)=>{const n=this._$Ep(r,e);void 0!==n&&(this._$Ev.set(n,r),t.push(n))})),t}static createProperty(t,e=m){if(e.state&&(e.attribute=!1),this.finalize(),this.elementProperties.set(t,e),!e.noAccessor&&!this.prototype.hasOwnProperty(t)){const r="symbol"==typeof t?Symbol():"__"+t,n=this.getPropertyDescriptor(t,r,e);void 0!==n&&Object.defineProperty(this.prototype,t,n)}}static getPropertyDescriptor(t,e,r){return{get(){return this[e]},set(n){const o=this[t];this[e]=n,this.requestUpdate(t,o,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||m}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),void 0!==t.h&&(this.h=[...t.h]),this.elementProperties=new Map(t.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const t=this.properties,e=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const r of e)this.createProperty(r,t[r])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const r=new Set(t.flat(1/0).reverse());for(const t of r)e.unshift(s(t))}else void 0!==t&&e.push(s(t));return e}static _$Ep(t,e){const r=e.attribute;return!1===r?void 0:"string"==typeof r?r:"string"==typeof t?t.toLowerCase():void 0}u(){var t;this._$E_=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(t=this.constructor.h)||void 0===t||t.forEach((t=>t(this)))}addController(t){var e,r;(null!==(e=this._$ES)&&void 0!==e?e:this._$ES=[]).push(t),void 0!==this.renderRoot&&this.isConnected&&(null===(r=t.hostConnected)||void 0===r||r.call(t))}removeController(t){var e;null===(e=this._$ES)||void 0===e||e.splice(this._$ES.indexOf(t)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach(((t,e)=>{this.hasOwnProperty(e)&&(this._$Ei.set(e,this[e]),delete this[e])}))}createRenderRoot(){var r;const n=null!==(r=this.shadowRoot)&&void 0!==r?r:this.attachShadow(this.constructor.shadowRootOptions);return((r,n)=>{e?r.adoptedStyleSheets=n.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet)):n.forEach((e=>{const n=document.createElement("style"),o=t.litNonce;void 0!==o&&n.setAttribute("nonce",o),n.textContent=e.cssText,r.appendChild(n)}))})(n,this.constructor.elementStyles),n}connectedCallback(){var t;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(t=this._$ES)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostConnected)||void 0===e?void 0:e.call(t)}))}enableUpdating(t){}disconnectedCallback(){var t;null===(t=this._$ES)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostDisconnected)||void 0===e?void 0:e.call(t)}))}attributeChangedCallback(t,e,r){this._$AK(t,r)}_$EO(t,e,r=m){var n;const o=this.constructor._$Ep(t,r);if(void 0!==o&&!0===r.reflect){const s=(void 0!==(null===(n=r.converter)||void 0===n?void 0:n.toAttribute)?r.converter:u).toAttribute(e,r.type);this._$El=t,null==s?this.removeAttribute(o):this.setAttribute(o,s),this._$El=null}}_$AK(t,e){var r;const n=this.constructor,o=n._$Ev.get(t);if(void 0!==o&&this._$El!==o){const t=n.getPropertyOptions(o),s="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==(null===(r=t.converter)||void 0===r?void 0:r.fromAttribute)?t.converter:u;this._$El=o,this[o]=s.fromAttribute(e,t.type),this._$El=null}}requestUpdate(t,e,r){let n=!0;void 0!==t&&(((r=r||this.constructor.getPropertyOptions(t)).hasChanged||d)(this[t],e)?(this._$AL.has(t)||this._$AL.set(t,e),!0===r.reflect&&this._$El!==t&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(t,r))):n=!1),!this.isUpdatePending&&n&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach(((t,e)=>this[e]=t)),this._$Ei=void 0);let e=!1;const r=this._$AL;try{e=this.shouldUpdate(r),e?(this.willUpdate(r),null===(t=this._$ES)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostUpdate)||void 0===e?void 0:e.call(t)})),this.update(r)):this._$Ek()}catch(t){throw e=!1,this._$Ek(),t}e&&this._$AE(r)}willUpdate(t){}_$AE(t){var e;null===(e=this._$ES)||void 0===e||e.forEach((t=>{var e;return null===(e=t.hostUpdated)||void 0===e?void 0:e.call(t)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(t){return!0}update(t){void 0!==this._$EC&&(this._$EC.forEach(((t,e)=>this._$EO(e,this[e],t))),this._$EC=void 0),this._$Ek()}updated(t){}firstUpdated(t){}}var g;f.finalized=!0,f.elementProperties=new Map,f.elementStyles=[],f.shadowRootOptions={mode:"open"},null==l||l({ReactiveElement:f}),(null!==(a=i.reactiveElementVersions)&&void 0!==a?a:i.reactiveElementVersions=[]).push("1.6.1");const p=window,y=p.trustedTypes,b=y?y.createPolicy("lit-html",{createHTML:t=>t}):void 0,C="$lit$",v=`lit$${(Math.random()+"").slice(9)}$`,M="?"+v,A=`<${M}>`,w=document,_=()=>w.createComment(""),P=t=>null===t||"object"!=typeof t&&"function"!=typeof t,k=Array.isArray,$="[ \t\n\f\r]",I=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,D=/-->/g,S=/>/g,x=RegExp(`>|${$}(?:([^\\s"'>=/]+)(${$}*=${$}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),T=/'/g,E=/"/g,R=/^(?:script|style|textarea|title)$/i,O=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),H=O(1),L=(O(2),Symbol.for("lit-noChange")),F=Symbol.for("lit-nothing"),N=new WeakMap,U=w.createTreeWalker(w,129,null,!1),B=(t,e)=>{const r=t.length-1,n=[];let o,s=2===e?"<svg>":"",a=I;for(let e=0;e<r;e++){const r=t[e];let i,h,c=-1,l=0;for(;l<r.length&&(a.lastIndex=l,h=a.exec(r),null!==h);)l=a.lastIndex,a===I?"!--"===h[1]?a=D:void 0!==h[1]?a=S:void 0!==h[2]?(R.test(h[2])&&(o=RegExp("</"+h[2],"g")),a=x):void 0!==h[3]&&(a=x):a===x?">"===h[0]?(a=null!=o?o:I,c=-1):void 0===h[1]?c=-2:(c=a.lastIndex-h[2].length,i=h[1],a=void 0===h[3]?x:'"'===h[3]?E:T):a===E||a===T?a=x:a===D||a===S?a=I:(a=x,o=void 0);const u=a===x&&t[e+1].startsWith("/>")?" ":"";s+=a===I?r+A:c>=0?(n.push(i),r.slice(0,c)+C+r.slice(c)+v+u):r+v+(-2===c?(n.push(void 0),e):u)}const i=s+(t[r]||"<?>")+(2===e?"</svg>":"");if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==b?b.createHTML(i):i,n]};class V{constructor({strings:t,_$litType$:e},r){let n;this.parts=[];let o=0,s=0;const a=t.length-1,i=this.parts,[h,c]=B(t,e);if(this.el=V.createElement(h,r),U.currentNode=this.el.content,2===e){const t=this.el.content,e=t.firstChild;e.remove(),t.append(...e.childNodes)}for(;null!==(n=U.nextNode())&&i.length<a;){if(1===n.nodeType){if(n.hasAttributes()){const t=[];for(const e of n.getAttributeNames())if(e.endsWith(C)||e.startsWith(v)){const r=c[s++];if(t.push(e),void 0!==r){const t=n.getAttribute(r.toLowerCase()+C).split(v),e=/([.?@])?(.*)/.exec(r);i.push({type:1,index:o,name:e[2],strings:t,ctor:"."===e[1]?J:"?"===e[1]?Y:"@"===e[1]?X:j})}else i.push({type:6,index:o})}for(const e of t)n.removeAttribute(e)}if(R.test(n.tagName)){const t=n.textContent.split(v),e=t.length-1;if(e>0){n.textContent=y?y.emptyScript:"";for(let r=0;r<e;r++)n.append(t[r],_()),U.nextNode(),i.push({type:2,index:++o});n.append(t[e],_())}}}else if(8===n.nodeType)if(n.data===M)i.push({type:2,index:o});else{let t=-1;for(;-1!==(t=n.data.indexOf(v,t+1));)i.push({type:7,index:o}),t+=v.length-1}o++}}static createElement(t,e){const r=w.createElement("template");return r.innerHTML=t,r}}function z(t,e,r=t,n){var o,s,a,i;if(e===L)return e;let h=void 0!==n?null===(o=r._$Co)||void 0===o?void 0:o[n]:r._$Cl;const c=P(e)?void 0:e._$litDirective$;return(null==h?void 0:h.constructor)!==c&&(null===(s=null==h?void 0:h._$AO)||void 0===s||s.call(h,!1),void 0===c?h=void 0:(h=new c(t),h._$AT(t,r,n)),void 0!==n?(null!==(a=(i=r)._$Co)&&void 0!==a?a:i._$Co=[])[n]=h:r._$Cl=h),void 0!==h&&(e=z(t,h._$AS(t,e.values),h,n)),e}class q{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){var e;const{el:{content:r},parts:n}=this._$AD,o=(null!==(e=null==t?void 0:t.creationScope)&&void 0!==e?e:w).importNode(r,!0);U.currentNode=o;let s=U.nextNode(),a=0,i=0,h=n[0];for(;void 0!==h;){if(a===h.index){let e;2===h.type?e=new G(s,s.nextSibling,this,t):1===h.type?e=new h.ctor(s,h.name,h.strings,this,t):6===h.type&&(e=new Z(s,this,t)),this._$AV.push(e),h=n[++i]}a!==(null==h?void 0:h.index)&&(s=U.nextNode(),a++)}return o}v(t){let e=0;for(const r of this._$AV)void 0!==r&&(void 0!==r.strings?(r._$AI(t,r,e),e+=r.strings.length-2):r._$AI(t[e])),e++}}class G{constructor(t,e,r,n){var o;this.type=2,this._$AH=F,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=r,this.options=n,this._$Cp=null===(o=null==n?void 0:n.isConnected)||void 0===o||o}get _$AU(){var t,e;return null!==(e=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==e?e:this._$Cp}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===(null==t?void 0:t.nodeType)&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=z(this,t,e),P(t)?t===F||null==t||""===t?(this._$AH!==F&&this._$AR(),this._$AH=F):t!==this._$AH&&t!==L&&this._(t):void 0!==t._$litType$?this.g(t):void 0!==t.nodeType?this.$(t):(t=>k(t)||"function"==typeof(null==t?void 0:t[Symbol.iterator]))(t)?this.T(t):this._(t)}k(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}$(t){this._$AH!==t&&(this._$AR(),this._$AH=this.k(t))}_(t){this._$AH!==F&&P(this._$AH)?this._$AA.nextSibling.data=t:this.$(w.createTextNode(t)),this._$AH=t}g(t){var e;const{values:r,_$litType$:n}=t,o="number"==typeof n?this._$AC(t):(void 0===n.el&&(n.el=V.createElement(n.h,this.options)),n);if((null===(e=this._$AH)||void 0===e?void 0:e._$AD)===o)this._$AH.v(r);else{const t=new q(o,this),e=t.u(this.options);t.v(r),this.$(e),this._$AH=t}}_$AC(t){let e=N.get(t.strings);return void 0===e&&N.set(t.strings,e=new V(t)),e}T(t){k(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let r,n=0;for(const o of t)n===e.length?e.push(r=new G(this.k(_()),this.k(_()),this,this.options)):r=e[n],r._$AI(o),n++;n<e.length&&(this._$AR(r&&r._$AB.nextSibling,n),e.length=n)}_$AR(t=this._$AA.nextSibling,e){var r;for(null===(r=this._$AP)||void 0===r||r.call(this,!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){var e;void 0===this._$AM&&(this._$Cp=t,null===(e=this._$AP)||void 0===e||e.call(this,t))}}class j{constructor(t,e,r,n,o){this.type=1,this._$AH=F,this._$AN=void 0,this.element=t,this.name=e,this._$AM=n,this.options=o,r.length>2||""!==r[0]||""!==r[1]?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=F}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,e=this,r,n){const o=this.strings;let s=!1;if(void 0===o)t=z(this,t,e,0),s=!P(t)||t!==this._$AH&&t!==L,s&&(this._$AH=t);else{const n=t;let a,i;for(t=o[0],a=0;a<o.length-1;a++)i=z(this,n[r+a],e,a),i===L&&(i=this._$AH[a]),s||(s=!P(i)||i!==this._$AH[a]),i===F?t=F:t!==F&&(t+=(null!=i?i:"")+o[a+1]),this._$AH[a]=i}s&&!n&&this.j(t)}j(t){t===F?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:"")}}class J extends j{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===F?void 0:t}}const W=y?y.emptyScript:"";class Y extends j{constructor(){super(...arguments),this.type=4}j(t){t&&t!==F?this.element.setAttribute(this.name,W):this.element.removeAttribute(this.name)}}class X extends j{constructor(t,e,r,n,o){super(t,e,r,n,o),this.type=5}_$AI(t,e=this){var r;if((t=null!==(r=z(this,t,e,0))&&void 0!==r?r:F)===L)return;const n=this._$AH,o=t===F&&n!==F||t.capture!==n.capture||t.once!==n.once||t.passive!==n.passive,s=t!==F&&(n===F||o);o&&this.element.removeEventListener(this.name,this,n),s&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var e,r;"function"==typeof this._$AH?this._$AH.call(null!==(r=null===(e=this.options)||void 0===e?void 0:e.host)&&void 0!==r?r:this.element,t):this._$AH.handleEvent(t)}}class Z{constructor(t,e,r){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(t){z(this,t)}}const K=p.litHtmlPolyfillSupport;var Q,tt;null==K||K(V,G),(null!==(g=p.litHtmlVersions)&&void 0!==g?g:p.litHtmlVersions=[]).push("2.7.2");class et extends f{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var t,e;const r=super.createRenderRoot();return null!==(t=(e=this.renderOptions).renderBefore)&&void 0!==t||(e.renderBefore=r.firstChild),r}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=((t,e,r)=>{var n,o;const s=null!==(n=null==r?void 0:r.renderBefore)&&void 0!==n?n:e;let a=s._$litPart$;if(void 0===a){const t=null!==(o=null==r?void 0:r.renderBefore)&&void 0!==o?o:null;s._$litPart$=a=new G(e.insertBefore(_(),t),t,void 0,null!=r?r:{})}return a._$AI(t),a})(e,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),null===(t=this._$Do)||void 0===t||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),null===(t=this._$Do)||void 0===t||t.setConnected(!1)}render(){return L}}et.finalized=!0,et._$litElement$=!0,null===(Q=globalThis.litElementHydrateSupport)||void 0===Q||Q.call(globalThis,{LitElement:et});const rt=globalThis.litElementPolyfillSupport;function nt(t){return t<0?-1:0===t?0:1}function ot(t,e,r){return(1-r)*t+r*e}function st(t,e,r){return r<t?t:r>e?e:r}function at(t){return(t%=360)<0&&(t+=360),t}function it(t,e){return 180-Math.abs(Math.abs(t-e)-180)}function ht(t,e){return[t[0]*e[0][0]+t[1]*e[0][1]+t[2]*e[0][2],t[0]*e[1][0]+t[1]*e[1][1]+t[2]*e[1][2],t[0]*e[2][0]+t[1]*e[2][1]+t[2]*e[2][2]]}null==rt||rt({LitElement:et}),(null!==(tt=globalThis.litElementVersions)&&void 0!==tt?tt:globalThis.litElementVersions=[]).push("3.3.1");const ct=[[.41233895,.35762064,.18051042],[.2126,.7152,.0722],[.01932141,.11916382,.95034478]],lt=[[3.2413774792388685,-1.5376652402851851,-.49885366846268053],[-.9691452513005321,1.8758853451067872,.04156585616912061],[.05562093689691305,-.20395524564742123,1.0571799111220335]],ut=[95.047,100,108.883];function dt(t,e,r){return(255<<24|(255&t)<<16|(255&e)<<8|255&r)>>>0}function mt(t){return dt(At(t[0]),At(t[1]),At(t[2]))}function ft(t){return t>>16&255}function gt(t){return t>>8&255}function pt(t){return 255&t}function yt(t,e,r){const n=lt,o=n[0][0]*t+n[0][1]*e+n[0][2]*r,s=n[1][0]*t+n[1][1]*e+n[1][2]*r,a=n[2][0]*t+n[2][1]*e+n[2][2]*r;return dt(At(o),At(s),At(a))}function bt(t){const e=function(t){return ht([Mt(ft(t)),Mt(gt(t)),Mt(pt(t))],ct)}(t)[1];return 116*wt(e/100)-16}function Ct(t){return 100*_t((t+16)/116)}function vt(t){return 116*wt(t/100)-16}function Mt(t){const e=t/255;return e<=.040449936?e/12.92*100:100*Math.pow((e+.055)/1.055,2.4)}function At(t){const e=t/100;let r=0;return r=e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,0,255,(n=Math.round(255*r))<0?0:n>255?255:n;var n}function wt(t){return t>216/24389?Math.pow(t,1/3):(903.2962962962963*t+16)/116}function _t(t){const e=t*t*t;return e>216/24389?e:(116*t-16)/903.2962962962963}class Pt{static make(t=function(){return ut}(),e=200/Math.PI*Ct(50)/100,r=50,n=2,o=!1){const s=t,a=.401288*s[0]+.650173*s[1]+-.051461*s[2],i=-.250268*s[0]+1.204414*s[1]+.045854*s[2],h=-.002079*s[0]+.048952*s[1]+.953127*s[2],c=.8+n/10,l=c>=.9?ot(.59,.69,10*(c-.9)):ot(.525,.59,10*(c-.8));let u=o?1:c*(1-1/3.6*Math.exp((-e-42)/92));u=u>1?1:u<0?0:u;const d=c,m=[u*(100/a)+1-u,u*(100/i)+1-u,u*(100/h)+1-u],f=1/(5*e+1),g=f*f*f*f,p=1-g,y=g*e+.1*p*p*Math.cbrt(5*e),b=Ct(r)/t[1],C=1.48+Math.sqrt(b),v=.725/Math.pow(b,.2),M=v,A=[Math.pow(y*m[0]*a/100,.42),Math.pow(y*m[1]*i/100,.42),Math.pow(y*m[2]*h/100,.42)],w=[400*A[0]/(A[0]+27.13),400*A[1]/(A[1]+27.13),400*A[2]/(A[2]+27.13)];return new Pt(b,(2*w[0]+w[1]+.05*w[2])*v,v,M,l,d,m,y,Math.pow(y,.25),C)}constructor(t,e,r,n,o,s,a,i,h,c){this.n=t,this.aw=e,this.nbb=r,this.ncb=n,this.c=o,this.nc=s,this.rgbD=a,this.fl=i,this.fLRoot=h,this.z=c}}Pt.DEFAULT=Pt.make();class kt{constructor(t,e,r,n,o,s,a,i,h){this.hue=t,this.chroma=e,this.j=r,this.q=n,this.m=o,this.s=s,this.jstar=a,this.astar=i,this.bstar=h}distance(t){const e=this.jstar-t.jstar,r=this.astar-t.astar,n=this.bstar-t.bstar,o=Math.sqrt(e*e+r*r+n*n);return 1.41*Math.pow(o,.63)}static fromInt(t){return kt.fromIntInViewingConditions(t,Pt.DEFAULT)}static fromIntInViewingConditions(t,e){const r=(65280&t)>>8,n=255&t,o=Mt((16711680&t)>>16),s=Mt(r),a=Mt(n),i=.41233895*o+.35762064*s+.18051042*a,h=.2126*o+.7152*s+.0722*a,c=.01932141*o+.11916382*s+.95034478*a,l=.401288*i+.650173*h-.051461*c,u=-.250268*i+1.204414*h+.045854*c,d=-.002079*i+.048952*h+.953127*c,m=e.rgbD[0]*l,f=e.rgbD[1]*u,g=e.rgbD[2]*d,p=Math.pow(e.fl*Math.abs(m)/100,.42),y=Math.pow(e.fl*Math.abs(f)/100,.42),b=Math.pow(e.fl*Math.abs(g)/100,.42),C=400*nt(m)*p/(p+27.13),v=400*nt(f)*y/(y+27.13),M=400*nt(g)*b/(b+27.13),A=(11*C+-12*v+M)/11,w=(C+v-2*M)/9,_=(20*C+20*v+21*M)/20,P=(40*C+20*v+M)/20,k=180*Math.atan2(w,A)/Math.PI,$=k<0?k+360:k>=360?k-360:k,I=$*Math.PI/180,D=P*e.nbb,S=100*Math.pow(D/e.aw,e.c*e.z),x=4/e.c*Math.sqrt(S/100)*(e.aw+4)*e.fLRoot,T=$<20.14?$+360:$,E=5e4/13*(.25*(Math.cos(T*Math.PI/180+2)+3.8))*e.nc*e.ncb*Math.sqrt(A*A+w*w)/(_+.305),R=Math.pow(E,.9)*Math.pow(1.64-Math.pow(.29,e.n),.73),O=R*Math.sqrt(S/100),H=O*e.fLRoot,L=50*Math.sqrt(R*e.c/(e.aw+4)),F=(1+100*.007)*S/(1+.007*S),N=1/.0228*Math.log(1+.0228*H),U=N*Math.cos(I),B=N*Math.sin(I);return new kt($,O,S,x,H,L,F,U,B)}static fromJch(t,e,r){return kt.fromJchInViewingConditions(t,e,r,Pt.DEFAULT)}static fromJchInViewingConditions(t,e,r,n){const o=4/n.c*Math.sqrt(t/100)*(n.aw+4)*n.fLRoot,s=e*n.fLRoot,a=e/Math.sqrt(t/100),i=50*Math.sqrt(a*n.c/(n.aw+4)),h=r*Math.PI/180,c=(1+100*.007)*t/(1+.007*t),l=1/.0228*Math.log(1+.0228*s),u=l*Math.cos(h),d=l*Math.sin(h);return new kt(r,e,t,o,s,i,c,u,d)}static fromUcs(t,e,r){return kt.fromUcsInViewingConditions(t,e,r,Pt.DEFAULT)}static fromUcsInViewingConditions(t,e,r,n){const o=e,s=r,a=Math.sqrt(o*o+s*s),i=(Math.exp(.0228*a)-1)/.0228/n.fLRoot;let h=Math.atan2(s,o)*(180/Math.PI);h<0&&(h+=360);const c=t/(1-.007*(t-100));return kt.fromJchInViewingConditions(c,i,h,n)}toInt(){return this.viewed(Pt.DEFAULT)}viewed(t){const e=0===this.chroma||0===this.j?0:this.chroma/Math.sqrt(this.j/100),r=Math.pow(e/Math.pow(1.64-Math.pow(.29,t.n),.73),1/.9),n=this.hue*Math.PI/180,o=.25*(Math.cos(n+2)+3.8),s=t.aw*Math.pow(this.j/100,1/t.c/t.z),a=o*(5e4/13)*t.nc*t.ncb,i=s/t.nbb,h=Math.sin(n),c=Math.cos(n),l=23*(i+.305)*r/(23*a+11*r*c+108*r*h),u=l*c,d=l*h,m=(460*i+451*u+288*d)/1403,f=(460*i-891*u-261*d)/1403,g=(460*i-220*u-6300*d)/1403,p=Math.max(0,27.13*Math.abs(m)/(400-Math.abs(m))),y=nt(m)*(100/t.fl)*Math.pow(p,1/.42),b=Math.max(0,27.13*Math.abs(f)/(400-Math.abs(f))),C=nt(f)*(100/t.fl)*Math.pow(b,1/.42),v=Math.max(0,27.13*Math.abs(g)/(400-Math.abs(g))),M=nt(g)*(100/t.fl)*Math.pow(v,1/.42),A=y/t.rgbD[0],w=C/t.rgbD[1],_=M/t.rgbD[2];return yt(1.86206786*A-1.01125463*w+.14918677*_,.38752654*A+.62144744*w-.00897398*_,-.0158415*A-.03412294*w+1.04996444*_)}static fromXyzInViewingConditions(t,e,r,n){const o=.401288*t+.650173*e-.051461*r,s=-.250268*t+1.204414*e+.045854*r,a=-.002079*t+.048952*e+.953127*r,i=n.rgbD[0]*o,h=n.rgbD[1]*s,c=n.rgbD[2]*a,l=Math.pow(n.fl*Math.abs(i)/100,.42),u=Math.pow(n.fl*Math.abs(h)/100,.42),d=Math.pow(n.fl*Math.abs(c)/100,.42),m=400*nt(i)*l/(l+27.13),f=400*nt(h)*u/(u+27.13),g=400*nt(c)*d/(d+27.13),p=(11*m+-12*f+g)/11,y=(m+f-2*g)/9,b=(20*m+20*f+21*g)/20,C=(40*m+20*f+g)/20,v=180*Math.atan2(y,p)/Math.PI,M=v<0?v+360:v>=360?v-360:v,A=M*Math.PI/180,w=C*n.nbb,_=100*Math.pow(w/n.aw,n.c*n.z),P=4/n.c*Math.sqrt(_/100)*(n.aw+4)*n.fLRoot,k=M<20.14?M+360:M,$=5e4/13*(1/4*(Math.cos(k*Math.PI/180+2)+3.8))*n.nc*n.ncb*Math.sqrt(p*p+y*y)/(b+.305),I=Math.pow($,.9)*Math.pow(1.64-Math.pow(.29,n.n),.73),D=I*Math.sqrt(_/100),S=D*n.fLRoot,x=50*Math.sqrt(I*n.c/(n.aw+4)),T=(1+100*.007)*_/(1+.007*_),E=Math.log(1+.0228*S)/.0228,R=E*Math.cos(A),O=E*Math.sin(A);return new kt(M,D,_,P,S,x,T,R,O)}xyzInViewingConditions(t){const e=0===this.chroma||0===this.j?0:this.chroma/Math.sqrt(this.j/100),r=Math.pow(e/Math.pow(1.64-Math.pow(.29,t.n),.73),1/.9),n=this.hue*Math.PI/180,o=.25*(Math.cos(n+2)+3.8),s=t.aw*Math.pow(this.j/100,1/t.c/t.z),a=o*(5e4/13)*t.nc*t.ncb,i=s/t.nbb,h=Math.sin(n),c=Math.cos(n),l=23*(i+.305)*r/(23*a+11*r*c+108*r*h),u=l*c,d=l*h,m=(460*i+451*u+288*d)/1403,f=(460*i-891*u-261*d)/1403,g=(460*i-220*u-6300*d)/1403,p=Math.max(0,27.13*Math.abs(m)/(400-Math.abs(m))),y=nt(m)*(100/t.fl)*Math.pow(p,1/.42),b=Math.max(0,27.13*Math.abs(f)/(400-Math.abs(f))),C=nt(f)*(100/t.fl)*Math.pow(b,1/.42),v=Math.max(0,27.13*Math.abs(g)/(400-Math.abs(g))),M=nt(g)*(100/t.fl)*Math.pow(v,1/.42),A=y/t.rgbD[0],w=C/t.rgbD[1],_=M/t.rgbD[2];return[1.86206786*A-1.01125463*w+.14918677*_,.38752654*A+.62144744*w-.00897398*_,-.0158415*A-.03412294*w+1.04996444*_]}}class $t{static sanitizeRadians(t){return(t+8*Math.PI)%(2*Math.PI)}static trueDelinearized(t){const e=t/100;let r=0;return r=e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,255*r}static chromaticAdaptation(t){const e=Math.pow(Math.abs(t),.42);return 400*nt(t)*e/(e+27.13)}static hueOf(t){const e=ht(t,$t.SCALED_DISCOUNT_FROM_LINRGB),r=$t.chromaticAdaptation(e[0]),n=$t.chromaticAdaptation(e[1]),o=$t.chromaticAdaptation(e[2]),s=(11*r+-12*n+o)/11,a=(r+n-2*o)/9;return Math.atan2(a,s)}static areInCyclicOrder(t,e,r){return $t.sanitizeRadians(e-t)<$t.sanitizeRadians(r-t)}static intercept(t,e,r){return(e-t)/(r-t)}static lerpPoint(t,e,r){return[t[0]+(r[0]-t[0])*e,t[1]+(r[1]-t[1])*e,t[2]+(r[2]-t[2])*e]}static setCoordinate(t,e,r,n){const o=$t.intercept(t[n],e,r[n]);return $t.lerpPoint(t,o,r)}static isBounded(t){return 0<=t&&t<=100}static nthVertex(t,e){const r=$t.Y_FROM_LINRGB[0],n=$t.Y_FROM_LINRGB[1],o=$t.Y_FROM_LINRGB[2],s=e%4<=1?0:100,a=e%2==0?0:100;if(e<4){const e=s,i=a,h=(t-e*n-i*o)/r;return $t.isBounded(h)?[h,e,i]:[-1,-1,-1]}if(e<8){const e=s,i=a,h=(t-i*r-e*o)/n;return $t.isBounded(h)?[i,h,e]:[-1,-1,-1]}{const e=s,i=a,h=(t-e*r-i*n)/o;return $t.isBounded(h)?[e,i,h]:[-1,-1,-1]}}static bisectToSegment(t,e){let r=[-1,-1,-1],n=r,o=0,s=0,a=!1,i=!0;for(let h=0;h<12;h++){const c=$t.nthVertex(t,h);if(c[0]<0)continue;const l=$t.hueOf(c);a?(i||$t.areInCyclicOrder(o,l,s))&&(i=!1,$t.areInCyclicOrder(o,e,l)?(n=c,s=l):(r=c,o=l)):(r=c,n=c,o=l,s=l,a=!0)}return[r,n]}static midpoint(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2,(t[2]+e[2])/2]}static criticalPlaneBelow(t){return Math.floor(t-.5)}static criticalPlaneAbove(t){return Math.ceil(t-.5)}static bisectToLimit(t,e){const r=$t.bisectToSegment(t,e);let n=r[0],o=$t.hueOf(n),s=r[1];for(let t=0;t<3;t++)if(n[t]!==s[t]){let r=-1,a=255;n[t]<s[t]?(r=$t.criticalPlaneBelow($t.trueDelinearized(n[t])),a=$t.criticalPlaneAbove($t.trueDelinearized(s[t]))):(r=$t.criticalPlaneAbove($t.trueDelinearized(n[t])),a=$t.criticalPlaneBelow($t.trueDelinearized(s[t])));for(let i=0;i<8&&!(Math.abs(a-r)<=1);i++){const i=Math.floor((r+a)/2),h=$t.CRITICAL_PLANES[i],c=$t.setCoordinate(n,h,s,t),l=$t.hueOf(c);$t.areInCyclicOrder(o,e,l)?(s=c,a=i):(n=c,o=l,r=i)}}return $t.midpoint(n,s)}static inverseChromaticAdaptation(t){const e=Math.abs(t),r=Math.max(0,27.13*e/(400-e));return nt(t)*Math.pow(r,1/.42)}static findResultByJ(t,e,r){let n=11*Math.sqrt(r);const o=Pt.DEFAULT,s=1/Math.pow(1.64-Math.pow(.29,o.n),.73),a=.25*(Math.cos(t+2)+3.8)*(5e4/13)*o.nc*o.ncb,i=Math.sin(t),h=Math.cos(t);for(let t=0;t<5;t++){const c=n/100,l=0===e||0===n?0:e/Math.sqrt(c),u=Math.pow(l*s,1/.9),d=o.aw*Math.pow(c,1/o.c/o.z)/o.nbb,m=23*(d+.305)*u/(23*a+11*u*h+108*u*i),f=m*h,g=m*i,p=(460*d+451*f+288*g)/1403,y=(460*d-891*f-261*g)/1403,b=(460*d-220*f-6300*g)/1403,C=ht([$t.inverseChromaticAdaptation(p),$t.inverseChromaticAdaptation(y),$t.inverseChromaticAdaptation(b)],$t.LINRGB_FROM_SCALED_DISCOUNT);if(C[0]<0||C[1]<0||C[2]<0)return 0;const v=$t.Y_FROM_LINRGB[0],M=$t.Y_FROM_LINRGB[1],A=$t.Y_FROM_LINRGB[2],w=v*C[0]+M*C[1]+A*C[2];if(w<=0)return 0;if(4===t||Math.abs(w-r)<.002)return C[0]>100.01||C[1]>100.01||C[2]>100.01?0:mt(C);n-=(w-r)*n/(2*w)}return 0}static solveToInt(t,e,r){if(e<1e-4||r<1e-4||r>99.9999)return function(t){const e=At(Ct(t));return dt(e,e,e)}(r);const n=(t=at(t))/180*Math.PI,o=Ct(r),s=$t.findResultByJ(n,e,o);return 0!==s?s:mt($t.bisectToLimit(o,n))}static solveToCam(t,e,r){return kt.fromInt($t.solveToInt(t,e,r))}}$t.SCALED_DISCOUNT_FROM_LINRGB=[[.001200833568784504,.002389694492170889,.0002795742885861124],[.0005891086651375999,.0029785502573438758,.0003270666104008398],[.00010146692491640572,.0005364214359186694,.0032979401770712076]],$t.LINRGB_FROM_SCALED_DISCOUNT=[[1373.2198709594231,-1100.4251190754821,-7.278681089101213],[-271.815969077903,559.6580465940733,-32.46047482791194],[1.9622899599665666,-57.173814538844006,308.7233197812385]],$t.Y_FROM_LINRGB=[.2126,.7152,.0722],$t.CRITICAL_PLANES=[.015176349177441876,.045529047532325624,.07588174588720938,.10623444424209313,.13658714259697685,.16693984095186062,.19729253930674434,.2276452376616281,.2579979360165119,.28835063437139563,.3188300904430532,.350925934958123,.3848314933096426,.42057480301049466,.458183274052838,.4976837250274023,.5391024159806381,.5824650784040898,.6277969426914107,.6751227633498623,.7244668422128921,.775853049866786,.829304845476233,.8848452951698498,.942497089126609,1.0022825574869039,1.0642236851973577,1.1283421258858297,1.1946592148522128,1.2631959812511864,1.3339731595349034,1.407011200216447,1.4823302800086415,1.5599503113873272,1.6398909516233677,1.7221716113234105,1.8068114625156377,1.8938294463134073,1.9832442801866852,2.075074464868551,2.1693382909216234,2.2660538449872063,2.36523901573795,2.4669114995532007,2.5710888059345764,2.6777882626779785,2.7870270208169257,2.898822059350997,3.0131901897720907,3.1301480604002863,3.2497121605402226,3.3718988244681087,3.4967242352587946,3.624204428461639,3.754355295633311,3.887192587735158,4.022731918402185,4.160988767090289,4.301978482107941,4.445716283538092,4.592217266055746,4.741496401646282,4.893568542229298,5.048448422192488,5.20615066083972,5.3666897647573375,5.5300801301023865,5.696336044816294,5.865471690767354,6.037501145825082,6.212438385869475,6.390297286737924,6.571091626112461,6.7548350853498045,6.941541251256611,7.131223617812143,7.323895587840543,7.5195704746346665,7.7182615035334345,7.919981813454504,8.124744458384042,8.332562408825165,8.543448553206703,8.757415699253682,8.974476575321063,9.194643831691977,9.417930041841839,9.644347703669503,9.873909240696694,10.106627003236781,10.342513269534024,10.58158024687427,10.8238400726681,11.069304815507364,11.317986476196008,11.569896988756009,11.825048221409341,12.083451977536606,12.345119996613247,12.610063955123938,12.878295467455942,13.149826086772048,13.42466730586372,13.702830557985108,13.984327217668513,14.269168601521828,14.55736596900856,14.848930523210871,15.143873411576273,15.44220572664832,15.743938506781891,16.04908273684337,16.35764934889634,16.66964922287304,16.985093187232053,17.30399201960269,17.62635644741625,17.95219714852476,18.281524751807332,18.614349837764564,18.95068293910138,19.290534541298456,19.633915083172692,19.98083495742689,20.331304511189067,20.685334046541502,21.042933821039977,21.404114048223256,21.76888489811322,22.137256497705877,22.50923893145328,22.884842241736916,23.264076429332462,23.6469514538663,24.033477234264016,24.42366364919083,24.817520537484558,25.21505769858089,25.61628489293138,26.021211842414342,26.429848230738664,26.842203703840827,27.258287870275353,27.678110301598522,28.10168053274597,28.529008062403893,28.96010235337422,29.39497283293396,29.83362889318845,30.276079891419332,30.722335150426627,31.172403958865512,31.62629557157785,32.08401920991837,32.54558406207592,33.010999283389665,33.4802739966603,33.953417292456834,34.430438229418264,34.911345834551085,35.39614910352207,35.88485700094671,36.37747846067349,36.87402238606382,37.37449765026789,37.87891309649659,38.38727753828926,38.89959975977785,39.41588851594697,39.93615253289054,40.460400508064545,40.98864111053629,41.520882981230194,42.05713473317016,42.597404951718396,43.141702194811224,43.6900349931913,44.24241185063697,44.798841244188324,45.35933162437017,45.92389141541209,46.49252901546552,47.065252796817916,47.64207110610409,48.22299226451468,48.808024568002054,49.3971762874833,49.9904556690408,50.587870934119984,51.189430279724725,51.79514187861014,52.40501387947288,53.0190544071392,53.637271562750364,54.259673423945976,54.88626804504493,55.517063457223934,56.15206766869424,56.79128866487574,57.43473440856916,58.08241284012621,58.734331877617365,59.39049941699807,60.05092333227251,60.715611475655585,61.38457167773311,62.057811747619894,62.7353394731159,63.417162620860914,64.10328893648692,64.79372614476921,65.48848194977529,66.18756403501224,66.89098006357258,67.59873767827808,68.31084450182222,69.02730813691093,69.74813616640164,70.47333615344107,71.20291564160104,71.93688215501312,72.67524319850172,73.41800625771542,74.16517879925733,74.9167682708136,75.67278210128072,76.43322770089146,77.1981124613393,77.96744375590167,78.74122893956174,79.51947534912904,80.30219030335869,81.08938110306934,81.88105503125999,82.67721935322541,83.4778813166706,84.28304815182372,85.09272707154808,85.90692527145302,86.72564993000343,87.54890820862819,88.3767072518277,89.2090541872801,90.04595612594655,90.88742016217518,91.73345337380438,92.58406282226491,93.43925555268066,94.29903859396902,95.16341895893969,96.03240364439274,96.9059996312159,97.78421388448044,98.6670533535366,99.55452497210776];class It{static from(t,e,r){return new It($t.solveToInt(t,e,r))}static fromInt(t){return new It(t)}toInt(){return this.argb}get hue(){return this.internalHue}set hue(t){this.setInternalState($t.solveToInt(t,this.internalChroma,this.internalTone))}get chroma(){return this.internalChroma}set chroma(t){this.setInternalState($t.solveToInt(this.internalHue,t,this.internalTone))}get tone(){return this.internalTone}set tone(t){this.setInternalState($t.solveToInt(this.internalHue,this.internalChroma,t))}constructor(t){this.argb=t;const e=kt.fromInt(t);this.internalHue=e.hue,this.internalChroma=e.chroma,this.internalTone=bt(t),this.argb=t}setInternalState(t){const e=kt.fromInt(t);this.internalHue=e.hue,this.internalChroma=e.chroma,this.internalTone=bt(t),this.argb=t}inViewingConditions(t){const e=kt.fromInt(this.toInt()).xyzInViewingConditions(t),r=kt.fromXyzInViewingConditions(e[0],e[1],e[2],Pt.make());return It.from(r.hue,r.chroma,vt(e[1]))}}class Dt{static harmonize(t,e){const r=It.fromInt(t),n=It.fromInt(e),o=it(r.hue,n.hue),s=Math.min(.5*o,15),a=at(r.hue+s*(i=r.hue,at(n.hue-i)<=180?1:-1));var i;return It.from(a,r.chroma,r.tone).toInt()}static hctHue(t,e,r){const n=Dt.cam16Ucs(t,e,r),o=kt.fromInt(n),s=kt.fromInt(t);return It.from(o.hue,s.chroma,bt(t)).toInt()}static cam16Ucs(t,e,r){const n=kt.fromInt(t),o=kt.fromInt(e),s=n.jstar,a=n.astar,i=n.bstar,h=s+(o.jstar-s)*r,c=a+(o.astar-a)*r,l=i+(o.bstar-i)*r;return kt.fromUcs(h,c,l).toInt()}}class St{static isDisliked(t){const e=Math.round(t.hue)>=90&&Math.round(t.hue)<=111,r=Math.round(t.chroma)>16,n=Math.round(t.tone)<65;return e&&r&&n}static fixIfDisliked(t){return St.isDisliked(t)?It.from(t.hue,t.chroma,70):t}}class xt{static ratioOfTones(t,e){return t=st(0,100,t),e=st(0,100,e),xt.ratioOfYs(Ct(t),Ct(e))}static ratioOfYs(t,e){const r=t>e?t:e;return(r+5)/((r===e?t:e)+5)}static lighter(t,e){if(t<0||t>100)return-1;const r=Ct(t),n=e*(r+5)-5,o=xt.ratioOfYs(n,r),s=Math.abs(o-e);if(o<e&&s>.04)return-1;const a=vt(n)+.4;return a<0||a>100?-1:a}static darker(t,e){if(t<0||t>100)return-1;const r=Ct(t),n=(r+5)/e-5,o=xt.ratioOfYs(r,n),s=Math.abs(o-e);if(o<e&&s>.04)return-1;const a=vt(n)-.4;return a<0||a>100?-1:a}static lighterUnsafe(t,e){const r=xt.lighter(t,e);return r<0?100:r}static darkerUnsafe(t,e){const r=xt.darker(t,e);return r<0?0:r}}class Tt{static fromPalette(t){return new Tt((e=>t.palette(e).hue),(e=>t.palette(e).chroma),t.tone,(e=>Tt.toneMinContrastDefault({tone:t.tone,scheme:e,background:t.background,toneDeltaConstraint:t.toneDeltaConstraint})),(e=>Tt.toneMaxContrastDefault({tone:t.tone,scheme:e,background:t.background,toneDeltaConstraint:t.toneDeltaConstraint})),t.background,t.toneDeltaConstraint)}static fromHueAndChroma(t){return new Tt(t.hue,t.chroma,t.tone,(e=>Tt.toneMinContrastDefault({tone:t.tone,scheme:e,background:t.background,toneDeltaConstraint:t.toneDeltaConstraint})),(e=>Tt.toneMaxContrastDefault({tone:t.tone,scheme:e,background:t.background,toneDeltaConstraint:t.toneDeltaConstraint})),t.background,t.toneDeltaConstraint)}static fromArgb(t){return new Tt((e=>It.fromInt(t.argb(e)).hue),(e=>It.fromInt(t.argb(e)).chroma),(e=>t.tone?.(e)??It.fromInt(t.argb(e)).tone),(e=>Tt.toneMinContrastDefault({tone:e=>t.tone?.(e)??It.fromInt(t.argb(e)).tone,scheme:e,background:t.background,toneDeltaConstraint:t.toneDeltaConstraint})),(e=>Tt.toneMaxContrastDefault({tone:e=>t.tone?.(e)??It.fromInt(t.argb(e)).tone,scheme:e,background:t.background,toneDeltaConstraint:t.toneDeltaConstraint})),t.background,t.toneDeltaConstraint)}constructor(t,e,r,n,o,s,a){this.hue=t,this.chroma=e,this.tone=r,this.toneMinContrast=n,this.toneMaxContrast=o,this.background=s,this.toneDeltaConstraint=a,this.hctCache=new Map}getArgb(t){return this.getHct(t).toInt()}getHct(t){const e=this.hctCache.get(t);if(null!=e)return e;const r=It.from(this.hue(t),this.chroma(t),this.getTone(t));return this.hctCache.size>4&&this.hctCache.clear(),this.hctCache.set(t,r),r}getTone(t){let e=this.tone(t);const r=t.contrastLevel<0;if(0!==t.contrastLevel){const n=this.tone(t),o=((r?this.toneMinContrast(t):this.toneMaxContrast(t))-n)*Math.abs(t.contrastLevel);e=o+n}const n=this.background?.(t);let o,s,a;if(null!=n){const e=null!=n?.background?.(t);if(o=xt.ratioOfTones(this.tone(t),n.tone(t)),r){const r=xt.ratioOfTones(this.toneMinContrast(t),n.toneMinContrast(t));s=e?r:null,a=o}else{const r=xt.ratioOfTones(this.toneMaxContrast(t),n.toneMaxContrast(t));s=e?Math.min(r,o):null,a=e?Math.max(r,o):null}}return e=Tt.calculateDynamicTone({scheme:t,toneStandard:this.tone,toneToJudge:e=>e.getTone(t),desiredTone:(t,r)=>e,background:null!=n?t=>n:void 0,toneDeltaConstraint:this.toneDeltaConstraint,minRatio:t=>s??1,maxRatio:t=>a??21}),e}static ensureToneDelta(t,e,r,n,o){const s=n?n(r):null;if(null==s||null==o)return t;const a=s.delta,i=o(s.keepAway),h=Math.abs(t-i);if(h>a)return t;switch(s.keepAwayPolarity){case"darker":return st(0,100,i+a);case"lighter":return st(0,100,i-a);case"no-preference":const n=e>s.keepAway.tone(r),o=Math.abs(h-a);return(n?t+o<=100:t<o)?t+o:t-o;default:return t}}static foregroundTone(t,e){const r=xt.lighterUnsafe(t,e),n=xt.darkerUnsafe(t,e),o=xt.ratioOfTones(r,t),s=xt.ratioOfTones(n,t);if(Tt.tonePrefersLightForeground(t)){const t=Math.abs(o-s)<.1&&o<e&&s<e;return o>=e||o>=s||t?r:n}return s>=e||s>=o?n:r}static calculateDynamicTone(t){const e=t.background,r=t.scheme,n=t.toneStandard,o=t.toneToJudge,s=t.desiredTone,a=t.minRatio,i=t.maxRatio,h=t.toneDeltaConstraint,c=n(r);let l=c;const u=e?.(r);if(null==u)return l;const d=u.tone(r),m=xt.ratioOfTones(c,d),f=o(u),g=s(m,f),p=xt.ratioOfTones(f,g),y=st(a?.(m)??1,i?.(m)??21,p);return l=y===p?g:Tt.foregroundTone(f,y),null==u.background?.(r)&&(l=Tt.enableLightForeground(l)),l=Tt.ensureToneDelta(l,c,r,h,(t=>o(t))),l}static toneMaxContrastDefault(t){return Tt.calculateDynamicTone({scheme:t.scheme,toneStandard:t.tone,toneToJudge:e=>e.toneMaxContrast(t.scheme),desiredTone:(e,r)=>null!=t.background?.(t.scheme)?.background?.(t.scheme)?Tt.foregroundTone(r,7):Tt.foregroundTone(r,Math.max(7,e)),background:t.background,toneDeltaConstraint:t.toneDeltaConstraint})}static toneMinContrastDefault(t){return Tt.calculateDynamicTone({scheme:t.scheme,toneStandard:t.tone,toneToJudge:e=>e.toneMinContrast(t.scheme),desiredTone:(e,r)=>{let n=t.tone(t.scheme);return e>=7?n=Tt.foregroundTone(r,4.5):e>=3?n=Tt.foregroundTone(r,3):null!=t.background?.(t.scheme)?.background?.(t.scheme)&&(n=Tt.foregroundTone(r,e)),n},background:t.background,toneDeltaConstraint:t.toneDeltaConstraint,minRatio:t=>1,maxRatio:t=>t})}static tonePrefersLightForeground(t){return Math.round(t)<60}static toneAllowsLightForeground(t){return Math.round(t)<=49}static enableLightForeground(t){return Tt.tonePrefersLightForeground(t)&&!Tt.toneAllowsLightForeground(t)?49:t}}var Et,Rt;(Rt=Et||(Et={}))[Rt.MONOCHROME=0]="MONOCHROME",Rt[Rt.NEUTRAL=1]="NEUTRAL",Rt[Rt.TONAL_SPOT=2]="TONAL_SPOT",Rt[Rt.VIBRANT=3]="VIBRANT",Rt[Rt.EXPRESSIVE=4]="EXPRESSIVE",Rt[Rt.FIDELITY=5]="FIDELITY",Rt[Rt.CONTENT=6]="CONTENT";class Ot{constructor(t,e,r){this.delta=t,this.keepAway=e,this.keepAwayPolarity=r}}function Ht(t){return t.variant===Et.FIDELITY||t.variant===Et.CONTENT}function Lt(t){return t.variant===Et.MONOCHROME}function Ft(t,e){const r=t.inViewingConditions(function(t){return Pt.make(void 0,void 0,t.isDark?30:80,void 0,void 0)}(e));return Tt.tonePrefersLightForeground(t.tone)&&!Tt.toneAllowsLightForeground(r.tone)?Tt.enableLightForeground(t.tone):Tt.enableLightForeground(r.tone)}class Nt{static highestSurface(t){return t.isDark?Nt.surfaceBright:Nt.surfaceDim}}Nt.contentAccentToneDelta=15,Nt.background=Tt.fromPalette({palette:t=>t.neutralPalette,tone:t=>t.isDark?6:98}),Nt.onBackground=Tt.fromPalette({palette:t=>t.neutralPalette,tone:t=>t.isDark?90:10,background:t=>Nt.background}),Nt.surface=Tt.fromPalette({palette:t=>t.neutralPalette,tone:t=>t.isDark?6:98}),Nt.surfaceDim=Tt.fromPalette({palette:t=>t.neutralPalette,tone:t=>t.isDark?6:87}),Nt.surfaceBright=Tt.fromPalette({palette:t=>t.neutralPalette,tone:t=>t.isDark?24:98}),Nt.surfaceContainerLowest=Tt.fromPalette({palette:t=>t.neutralPalette,tone:t=>t.isDark?4:100}),Nt.surfaceContainerLow=Tt.fromPalette({palette:t=>t.neutralPalette,tone:t=>t.isDark?10:96}),Nt.surfaceContainer=Tt.fromPalette({palette:t=>t.neutralPalette,tone:t=>t.isDark?12:94}),Nt.surfaceContainerHigh=Tt.fromPalette({palette:t=>t.neutralPalette,tone:t=>t.isDark?17:92}),Nt.surfaceContainerHighest=Tt.fromPalette({palette:t=>t.neutralPalette,tone:t=>t.isDark?22:90}),Nt.onSurface=Tt.fromPalette({palette:t=>t.neutralPalette,tone:t=>t.isDark?90:10,background:t=>Nt.highestSurface(t)}),Nt.surfaceVariant=Tt.fromPalette({palette:t=>t.neutralVariantPalette,tone:t=>t.isDark?30:90}),Nt.onSurfaceVariant=Tt.fromPalette({palette:t=>t.neutralVariantPalette,tone:t=>t.isDark?80:30,background:t=>Nt.surfaceVariant}),Nt.inverseSurface=Tt.fromPalette({palette:t=>t.neutralPalette,tone:t=>t.isDark?90:20}),Nt.inverseOnSurface=Tt.fromPalette({palette:t=>t.neutralPalette,tone:t=>t.isDark?20:95,background:t=>Nt.inverseSurface}),Nt.outline=Tt.fromPalette({palette:t=>t.neutralVariantPalette,tone:t=>50,background:t=>Nt.highestSurface(t)}),Nt.outlineVariant=Tt.fromPalette({palette:t=>t.neutralVariantPalette,tone:t=>t.isDark?30:80,background:t=>Nt.highestSurface(t)}),Nt.shadow=Tt.fromPalette({palette:t=>t.neutralPalette,tone:t=>0}),Nt.scrim=Tt.fromPalette({palette:t=>t.neutralPalette,tone:t=>0}),Nt.surfaceTintColor=Tt.fromPalette({palette:t=>t.primaryPalette,tone:t=>t.isDark?80:40}),Nt.primary=Tt.fromPalette({palette:t=>t.primaryPalette,tone:t=>Lt(t)?t.isDark?100:0:t.isDark?80:40,background:t=>Nt.highestSurface(t),toneDeltaConstraint:t=>new Ot(Nt.contentAccentToneDelta,Nt.primaryContainer,t.isDark?"darker":"lighter")}),Nt.onPrimary=Tt.fromPalette({palette:t=>t.primaryPalette,tone:t=>Lt(t)?t.isDark?10:90:t.isDark?20:100,background:t=>Nt.primary}),Nt.primaryContainer=Tt.fromPalette({palette:t=>t.primaryPalette,tone:t=>Lt(t)?t.isDark?85:25:Ht(t)?Ft(t.sourceColorHct,t):t.isDark?30:90,background:t=>Nt.highestSurface(t)}),Nt.onPrimaryContainer=Tt.fromPalette({palette:t=>t.primaryPalette,tone:t=>Lt(t)?t.isDark?0:100:Ht(t)?Tt.foregroundTone(Nt.primaryContainer.tone(t),4.5):t.isDark?90:10,background:t=>Nt.primaryContainer}),Nt.inversePrimary=Tt.fromPalette({palette:t=>t.primaryPalette,tone:t=>t.isDark?40:80,background:t=>Nt.inverseSurface}),Nt.inverseOnPrimary=Tt.fromPalette({palette:t=>t.primaryPalette,tone:t=>t.isDark?100:20,background:t=>Nt.inversePrimary}),Nt.secondary=Tt.fromPalette({palette:t=>t.secondaryPalette,tone:t=>t.isDark?80:40,background:t=>Nt.highestSurface(t),toneDeltaConstraint:t=>new Ot(Nt.contentAccentToneDelta,Nt.secondaryContainer,t.isDark?"darker":"lighter")}),Nt.onSecondary=Tt.fromPalette({palette:t=>t.secondaryPalette,tone:t=>Lt(t)?t.isDark?10:100:t.isDark?20:100,background:t=>Nt.secondary}),Nt.secondaryContainer=Tt.fromPalette({palette:t=>t.secondaryPalette,tone:t=>{const e=t.isDark?30:90;if(Lt(t))return t.isDark?30:85;if(!Ht(t))return e;let r=function(t,e,r,n){let o=r,s=It.from(t,e,r);if(s.chroma<e){let r=s.chroma;for(;s.chroma<e;){o+=n?-1:1;const a=It.from(t,e,o);if(r>a.chroma)break;if(Math.abs(a.chroma-e)<.4)break;Math.abs(a.chroma-e)<Math.abs(s.chroma-e)&&(s=a),r=Math.max(r,a.chroma)}}return o}(t.secondaryPalette.hue,t.secondaryPalette.chroma,e,!t.isDark);return r=Ft(t.secondaryPalette.getHct(r),t),r},background:t=>Nt.highestSurface(t)}),Nt.onSecondaryContainer=Tt.fromPalette({palette:t=>t.secondaryPalette,tone:t=>Ht(t)?Tt.foregroundTone(Nt.secondaryContainer.tone(t),4.5):t.isDark?90:10,background:t=>Nt.secondaryContainer}),Nt.tertiary=Tt.fromPalette({palette:t=>t.tertiaryPalette,tone:t=>Lt(t)?t.isDark?90:25:t.isDark?80:40,background:t=>Nt.highestSurface(t),toneDeltaConstraint:t=>new Ot(Nt.contentAccentToneDelta,Nt.tertiaryContainer,t.isDark?"darker":"lighter")}),Nt.onTertiary=Tt.fromPalette({palette:t=>t.tertiaryPalette,tone:t=>Lt(t)?t.isDark?10:90:t.isDark?20:100,background:t=>Nt.tertiary}),Nt.tertiaryContainer=Tt.fromPalette({palette:t=>t.tertiaryPalette,tone:t=>{if(Lt(t))return t.isDark?60:49;if(!Ht(t))return t.isDark?30:90;const e=Ft(t.tertiaryPalette.getHct(t.sourceColorHct.tone),t),r=t.tertiaryPalette.getHct(e);return St.fixIfDisliked(r).tone},background:t=>Nt.highestSurface(t)}),Nt.onTertiaryContainer=Tt.fromPalette({palette:t=>t.tertiaryPalette,tone:t=>Lt(t)?t.isDark?0:100:Ht(t)?Tt.foregroundTone(Nt.tertiaryContainer.tone(t),4.5):t.isDark?90:10,background:t=>Nt.tertiaryContainer}),Nt.error=Tt.fromPalette({palette:t=>t.errorPalette,tone:t=>t.isDark?80:40,background:t=>Nt.highestSurface(t),toneDeltaConstraint:t=>new Ot(Nt.contentAccentToneDelta,Nt.errorContainer,t.isDark?"darker":"lighter")}),Nt.onError=Tt.fromPalette({palette:t=>t.errorPalette,tone:t=>t.isDark?20:100,background:t=>Nt.error}),Nt.errorContainer=Tt.fromPalette({palette:t=>t.errorPalette,tone:t=>t.isDark?30:90,background:t=>Nt.highestSurface(t)}),Nt.onErrorContainer=Tt.fromPalette({palette:t=>t.errorPalette,tone:t=>t.isDark?90:10,background:t=>Nt.errorContainer}),Nt.primaryFixed=Tt.fromPalette({palette:t=>t.primaryPalette,tone:t=>Lt(t)?t.isDark?100:10:90,background:t=>Nt.highestSurface(t)}),Nt.primaryFixedDim=Tt.fromPalette({palette:t=>t.primaryPalette,tone:t=>Lt(t)?t.isDark?90:20:80,background:t=>Nt.highestSurface(t)}),Nt.onPrimaryFixed=Tt.fromPalette({palette:t=>t.primaryPalette,tone:t=>Lt(t)?t.isDark?10:90:10,background:t=>Nt.primaryFixedDim}),Nt.onPrimaryFixedVariant=Tt.fromPalette({palette:t=>t.primaryPalette,tone:t=>Lt(t)?t.isDark?30:70:30,background:t=>Nt.primaryFixedDim}),Nt.secondaryFixed=Tt.fromPalette({palette:t=>t.secondaryPalette,tone:t=>Lt(t)?80:90,background:t=>Nt.highestSurface(t)}),Nt.secondaryFixedDim=Tt.fromPalette({palette:t=>t.secondaryPalette,tone:t=>Lt(t)?70:80,background:t=>Nt.highestSurface(t)}),Nt.onSecondaryFixed=Tt.fromPalette({palette:t=>t.secondaryPalette,tone:t=>10,background:t=>Nt.secondaryFixedDim}),Nt.onSecondaryFixedVariant=Tt.fromPalette({palette:t=>t.secondaryPalette,tone:t=>Lt(t)?25:30,background:t=>Nt.secondaryFixedDim}),Nt.tertiaryFixed=Tt.fromPalette({palette:t=>t.tertiaryPalette,tone:t=>Lt(t)?40:90,background:t=>Nt.highestSurface(t)}),Nt.tertiaryFixedDim=Tt.fromPalette({palette:t=>t.tertiaryPalette,tone:t=>Lt(t)?30:80,background:t=>Nt.highestSurface(t)}),Nt.onTertiaryFixed=Tt.fromPalette({palette:t=>t.tertiaryPalette,tone:t=>Lt(t)?90:10,background:t=>Nt.tertiaryFixedDim}),Nt.onTertiaryFixedVariant=Tt.fromPalette({palette:t=>t.tertiaryPalette,tone:t=>Lt(t)?70:30,background:t=>Nt.tertiaryFixedDim});class Ut{static fromInt(t){const e=It.fromInt(t);return Ut.fromHueAndChroma(e.hue,e.chroma)}static fromHueAndChroma(t,e){return new Ut(t,e)}constructor(t,e){this.hue=t,this.chroma=e,this.cache=new Map}tone(t){let e=this.cache.get(t);return void 0===e&&(e=It.from(this.hue,this.chroma,t).toInt(),this.cache.set(t,e)),e}getHct(t){return It.fromInt(this.tone(t))}}class Bt{static of(t){return new Bt(t,!1)}static contentOf(t){return new Bt(t,!0)}static fromColors(t){return Bt.createPaletteFromColors(!1,t)}static contentFromColors(t){return Bt.createPaletteFromColors(!0,t)}static createPaletteFromColors(t,e){const r=new Bt(e.primary,t);if(e.secondary){const n=new Bt(e.secondary,t);r.a2=n.a1}if(e.tertiary){const n=new Bt(e.tertiary,t);r.a3=n.a1}if(e.error){const n=new Bt(e.error,t);r.error=n.a1}if(e.neutral){const n=new Bt(e.neutral,t);r.n1=n.n1}if(e.neutralVariant){const n=new Bt(e.neutralVariant,t);r.n2=n.n2}return r}constructor(t,e){const r=It.fromInt(t),n=r.hue,o=r.chroma;e?(this.a1=Ut.fromHueAndChroma(n,o),this.a2=Ut.fromHueAndChroma(n,o/3),this.a3=Ut.fromHueAndChroma(n+60,o/2),this.n1=Ut.fromHueAndChroma(n,Math.min(o/12,4)),this.n2=Ut.fromHueAndChroma(n,Math.min(o/6,8))):(this.a1=Ut.fromHueAndChroma(n,Math.max(48,o)),this.a2=Ut.fromHueAndChroma(n,16),this.a3=Ut.fromHueAndChroma(n+60,24),this.n1=Ut.fromHueAndChroma(n,4),this.n2=Ut.fromHueAndChroma(n,8)),this.error=Ut.fromHueAndChroma(25,84)}}class Vt{fromInt(t){return function(t){const e=Mt(ft(t)),r=Mt(gt(t)),n=Mt(pt(t)),o=ct,s=o[0][0]*e+o[0][1]*r+o[0][2]*n,a=o[1][0]*e+o[1][1]*r+o[1][2]*n,i=o[2][0]*e+o[2][1]*r+o[2][2]*n,h=a/ut[1],c=i/ut[2],l=wt(s/ut[0]),u=wt(h);return[116*u-16,500*(l-u),200*(u-wt(c))]}(t)}toInt(t){return function(t,e,r){const n=ut,o=(t+16)/116,s=o-r/200,a=_t(e/500+o),i=_t(o),h=_t(s);return yt(a*n[0],i*n[1],h*n[2])}(t[0],t[1],t[2])}distance(t,e){const r=t[0]-e[0],n=t[1]-e[1],o=t[2]-e[2];return r*r+n*n+o*o}}class zt{static quantize(t,e,r){const n=new Map,o=new Array,s=new Array,a=new Vt;let i=0;for(let e=0;e<t.length;e++){const r=t[e],h=n.get(r);void 0===h?(i++,o.push(a.fromInt(r)),s.push(r),n.set(r,1)):n.set(r,h+1)}const h=new Array;for(let t=0;t<i;t++){const e=s[t],r=n.get(e);void 0!==r&&(h[t]=r)}let c=Math.min(r,i);e.length>0&&(c=Math.min(c,e.length));const l=new Array;for(let t=0;t<e.length;t++)l.push(a.fromInt(e[t]));const u=c-l.length;if(0===e.length&&u>0)for(let t=0;t<u;t++){const t=100*Math.random(),e=201*Math.random()-100,r=201*Math.random()-100;l.push(new Array(t,e,r))}const d=new Array;for(let t=0;t<i;t++)d.push(Math.floor(Math.random()*c));const m=new Array;for(let t=0;t<c;t++){m.push(new Array);for(let e=0;e<c;e++)m[t].push(0)}const f=new Array;for(let t=0;t<c;t++){f.push(new Array);for(let e=0;e<c;e++)f[t].push(new qt)}const g=new Array;for(let t=0;t<c;t++)g.push(0);for(let t=0;t<10;t++){for(let t=0;t<c;t++){for(let e=t+1;e<c;e++){const r=a.distance(l[t],l[e]);f[e][t].distance=r,f[e][t].index=t,f[t][e].distance=r,f[t][e].index=e}f[t].sort();for(let e=0;e<c;e++)m[t][e]=f[t][e].index}let e=0;for(let t=0;t<i;t++){const r=o[t],n=d[t],s=l[n],i=a.distance(r,s);let h=i,u=-1;for(let t=0;t<c;t++){if(f[n][t].distance>=4*i)continue;const e=a.distance(r,l[t]);e<h&&(h=e,u=t)}-1!==u&&Math.abs(Math.sqrt(h)-Math.sqrt(i))>3&&(e++,d[t]=u)}if(0===e&&0!==t)break;const r=new Array(c).fill(0),n=new Array(c).fill(0),s=new Array(c).fill(0);for(let t=0;t<c;t++)g[t]=0;for(let t=0;t<i;t++){const e=d[t],a=o[t],i=h[t];g[e]+=i,r[e]+=a[0]*i,n[e]+=a[1]*i,s[e]+=a[2]*i}for(let t=0;t<c;t++){const e=g[t];if(0===e){l[t]=[0,0,0];continue}const o=r[t]/e,a=n[t]/e,i=s[t]/e;l[t]=[o,a,i]}}const p=new Map;for(let t=0;t<c;t++){const e=g[t];if(0===e)continue;const r=a.toInt(l[t]);p.has(r)||p.set(r,e)}return p}}class qt{constructor(){this.distance=-1,this.index=-1}}class Gt{static quantize(t){const e=new Map;for(let r=0;r<t.length;r++){const n=t[r];(n>>24&255)<255||e.set(n,(e.get(n)??0)+1)}return e}}const jt=33,Jt=35937,Wt="red",Yt="green",Xt="blue";class Zt{constructor(t=[],e=[],r=[],n=[],o=[],s=[]){this.weights=t,this.momentsR=e,this.momentsG=r,this.momentsB=n,this.moments=o,this.cubes=s}quantize(t,e){this.constructHistogram(t),this.computeMoments();const r=this.createBoxes(e);return this.createResult(r.resultCount)}constructHistogram(t){this.weights=Array.from({length:Jt}).fill(0),this.momentsR=Array.from({length:Jt}).fill(0),this.momentsG=Array.from({length:Jt}).fill(0),this.momentsB=Array.from({length:Jt}).fill(0),this.moments=Array.from({length:Jt}).fill(0);const e=Gt.quantize(t);for(const[t,r]of e.entries()){const e=ft(t),n=gt(t),o=pt(t),s=3,a=1+(e>>s),i=1+(n>>s),h=1+(o>>s),c=this.getIndex(a,i,h);this.weights[c]=(this.weights[c]??0)+r,this.momentsR[c]+=r*e,this.momentsG[c]+=r*n,this.momentsB[c]+=r*o,this.moments[c]+=r*(e*e+n*n+o*o)}}computeMoments(){for(let t=1;t<jt;t++){const e=Array.from({length:jt}).fill(0),r=Array.from({length:jt}).fill(0),n=Array.from({length:jt}).fill(0),o=Array.from({length:jt}).fill(0),s=Array.from({length:jt}).fill(0);for(let a=1;a<jt;a++){let i=0,h=0,c=0,l=0,u=0;for(let d=1;d<jt;d++){const m=this.getIndex(t,a,d);i+=this.weights[m],h+=this.momentsR[m],c+=this.momentsG[m],l+=this.momentsB[m],u+=this.moments[m],e[d]+=i,r[d]+=h,n[d]+=c,o[d]+=l,s[d]+=u;const f=this.getIndex(t-1,a,d);this.weights[m]=this.weights[f]+e[d],this.momentsR[m]=this.momentsR[f]+r[d],this.momentsG[m]=this.momentsG[f]+n[d],this.momentsB[m]=this.momentsB[f]+o[d],this.moments[m]=this.moments[f]+s[d]}}}}createBoxes(t){this.cubes=Array.from({length:t}).fill(0).map((()=>new Kt));const e=Array.from({length:t}).fill(0);this.cubes[0].r0=0,this.cubes[0].g0=0,this.cubes[0].b0=0,this.cubes[0].r1=32,this.cubes[0].g1=32,this.cubes[0].b1=32;let r=t,n=0;for(let o=1;o<t;o++){this.cut(this.cubes[n],this.cubes[o])?(e[n]=this.cubes[n].vol>1?this.variance(this.cubes[n]):0,e[o]=this.cubes[o].vol>1?this.variance(this.cubes[o]):0):(e[n]=0,o--),n=0;let t=e[0];for(let r=1;r<=o;r++)e[r]>t&&(t=e[r],n=r);if(t<=0){r=o+1;break}}return new Qt(t,r)}createResult(t){const e=[];for(let r=0;r<t;++r){const t=this.cubes[r],n=this.volume(t,this.weights);if(n>0){const r=255<<24|(255&Math.round(this.volume(t,this.momentsR)/n))<<16|(255&Math.round(this.volume(t,this.momentsG)/n))<<8|255&Math.round(this.volume(t,this.momentsB)/n);e.push(r)}}return e}variance(t){const e=this.volume(t,this.momentsR),r=this.volume(t,this.momentsG),n=this.volume(t,this.momentsB);return this.moments[this.getIndex(t.r1,t.g1,t.b1)]-this.moments[this.getIndex(t.r1,t.g1,t.b0)]-this.moments[this.getIndex(t.r1,t.g0,t.b1)]+this.moments[this.getIndex(t.r1,t.g0,t.b0)]-this.moments[this.getIndex(t.r0,t.g1,t.b1)]+this.moments[this.getIndex(t.r0,t.g1,t.b0)]+this.moments[this.getIndex(t.r0,t.g0,t.b1)]-this.moments[this.getIndex(t.r0,t.g0,t.b0)]-(e*e+r*r+n*n)/this.volume(t,this.weights)}cut(t,e){const r=this.volume(t,this.momentsR),n=this.volume(t,this.momentsG),o=this.volume(t,this.momentsB),s=this.volume(t,this.weights),a=this.maximize(t,Wt,t.r0+1,t.r1,r,n,o,s),i=this.maximize(t,Yt,t.g0+1,t.g1,r,n,o,s),h=this.maximize(t,Xt,t.b0+1,t.b1,r,n,o,s);let c;const l=a.maximum,u=i.maximum,d=h.maximum;if(l>=u&&l>=d){if(a.cutLocation<0)return!1;c=Wt}else c=u>=l&&u>=d?Yt:Xt;switch(e.r1=t.r1,e.g1=t.g1,e.b1=t.b1,c){case Wt:t.r1=a.cutLocation,e.r0=t.r1,e.g0=t.g0,e.b0=t.b0;break;case Yt:t.g1=i.cutLocation,e.r0=t.r0,e.g0=t.g1,e.b0=t.b0;break;case Xt:t.b1=h.cutLocation,e.r0=t.r0,e.g0=t.g0,e.b0=t.b1;break;default:throw new Error("unexpected direction "+c)}return t.vol=(t.r1-t.r0)*(t.g1-t.g0)*(t.b1-t.b0),e.vol=(e.r1-e.r0)*(e.g1-e.g0)*(e.b1-e.b0),!0}maximize(t,e,r,n,o,s,a,i){const h=this.bottom(t,e,this.momentsR),c=this.bottom(t,e,this.momentsG),l=this.bottom(t,e,this.momentsB),u=this.bottom(t,e,this.weights);let d=0,m=-1,f=0,g=0,p=0,y=0;for(let b=r;b<n;b++){if(f=h+this.top(t,e,b,this.momentsR),g=c+this.top(t,e,b,this.momentsG),p=l+this.top(t,e,b,this.momentsB),y=u+this.top(t,e,b,this.weights),0===y)continue;let r=1*(f*f+g*g+p*p),n=1*y,C=r/n;f=o-f,g=s-g,p=a-p,y=i-y,0!==y&&(r=1*(f*f+g*g+p*p),n=1*y,C+=r/n,C>d&&(d=C,m=b))}return new te(m,d)}volume(t,e){return e[this.getIndex(t.r1,t.g1,t.b1)]-e[this.getIndex(t.r1,t.g1,t.b0)]-e[this.getIndex(t.r1,t.g0,t.b1)]+e[this.getIndex(t.r1,t.g0,t.b0)]-e[this.getIndex(t.r0,t.g1,t.b1)]+e[this.getIndex(t.r0,t.g1,t.b0)]+e[this.getIndex(t.r0,t.g0,t.b1)]-e[this.getIndex(t.r0,t.g0,t.b0)]}bottom(t,e,r){switch(e){case Wt:return-r[this.getIndex(t.r0,t.g1,t.b1)]+r[this.getIndex(t.r0,t.g1,t.b0)]+r[this.getIndex(t.r0,t.g0,t.b1)]-r[this.getIndex(t.r0,t.g0,t.b0)];case Yt:return-r[this.getIndex(t.r1,t.g0,t.b1)]+r[this.getIndex(t.r1,t.g0,t.b0)]+r[this.getIndex(t.r0,t.g0,t.b1)]-r[this.getIndex(t.r0,t.g0,t.b0)];case Xt:return-r[this.getIndex(t.r1,t.g1,t.b0)]+r[this.getIndex(t.r1,t.g0,t.b0)]+r[this.getIndex(t.r0,t.g1,t.b0)]-r[this.getIndex(t.r0,t.g0,t.b0)];default:throw new Error("unexpected direction $direction")}}top(t,e,r,n){switch(e){case Wt:return n[this.getIndex(r,t.g1,t.b1)]-n[this.getIndex(r,t.g1,t.b0)]-n[this.getIndex(r,t.g0,t.b1)]+n[this.getIndex(r,t.g0,t.b0)];case Yt:return n[this.getIndex(t.r1,r,t.b1)]-n[this.getIndex(t.r1,r,t.b0)]-n[this.getIndex(t.r0,r,t.b1)]+n[this.getIndex(t.r0,r,t.b0)];case Xt:return n[this.getIndex(t.r1,t.g1,r)]-n[this.getIndex(t.r1,t.g0,r)]-n[this.getIndex(t.r0,t.g1,r)]+n[this.getIndex(t.r0,t.g0,r)];default:throw new Error("unexpected direction $direction")}}getIndex(t,e,r){return(t<<10)+(t<<6)+t+(e<<5)+e+r}}class Kt{constructor(t=0,e=0,r=0,n=0,o=0,s=0,a=0){this.r0=t,this.r1=e,this.g0=r,this.g1=n,this.b0=o,this.b1=s,this.vol=a}}class Qt{constructor(t,e){this.requestedCount=t,this.resultCount=e}}class te{constructor(t,e){this.cutLocation=t,this.maximum=e}}class ee{static quantize(t,e){const r=(new Zt).quantize(t,e);return zt.quantize(t,r,e)}}class re{constructor(t){this.sourceColorArgb=t.sourceColorArgb,this.variant=t.variant,this.contrastLevel=t.contrastLevel,this.isDark=t.isDark,this.sourceColorHct=It.fromInt(t.sourceColorArgb),this.primaryPalette=t.primaryPalette,this.secondaryPalette=t.secondaryPalette,this.tertiaryPalette=t.tertiaryPalette,this.neutralPalette=t.neutralPalette,this.neutralVariantPalette=t.neutralVariantPalette,this.errorPalette=Ut.fromHueAndChroma(25,84)}static getRotatedHue(t,e,r){const n=t.hue;if(e.length!==r.length)throw new Error(`mismatch between hue length ${e.length} & rotations ${r.length}`);if(1===r.length)return at(t.hue+r[0]);const o=e.length;for(let t=0;t<=o-2;t++){const o=e[t],s=e[t+1];if(o<n&&n<s)return at(n+r[t])}return n}}class ne{get primary(){return this.props.primary}get onPrimary(){return this.props.onPrimary}get primaryContainer(){return this.props.primaryContainer}get onPrimaryContainer(){return this.props.onPrimaryContainer}get secondary(){return this.props.secondary}get onSecondary(){return this.props.onSecondary}get secondaryContainer(){return this.props.secondaryContainer}get onSecondaryContainer(){return this.props.onSecondaryContainer}get tertiary(){return this.props.tertiary}get onTertiary(){return this.props.onTertiary}get tertiaryContainer(){return this.props.tertiaryContainer}get onTertiaryContainer(){return this.props.onTertiaryContainer}get error(){return this.props.error}get onError(){return this.props.onError}get errorContainer(){return this.props.errorContainer}get onErrorContainer(){return this.props.onErrorContainer}get background(){return this.props.background}get onBackground(){return this.props.onBackground}get surface(){return this.props.surface}get onSurface(){return this.props.onSurface}get surfaceVariant(){return this.props.surfaceVariant}get onSurfaceVariant(){return this.props.onSurfaceVariant}get outline(){return this.props.outline}get outlineVariant(){return this.props.outlineVariant}get shadow(){return this.props.shadow}get scrim(){return this.props.scrim}get inverseSurface(){return this.props.inverseSurface}get inverseOnSurface(){return this.props.inverseOnSurface}get inversePrimary(){return this.props.inversePrimary}static light(t){return ne.lightFromCorePalette(Bt.of(t))}static dark(t){return ne.darkFromCorePalette(Bt.of(t))}static lightContent(t){return ne.lightFromCorePalette(Bt.contentOf(t))}static darkContent(t){return ne.darkFromCorePalette(Bt.contentOf(t))}static lightFromCorePalette(t){return new ne({primary:t.a1.tone(40),onPrimary:t.a1.tone(100),primaryContainer:t.a1.tone(90),onPrimaryContainer:t.a1.tone(10),secondary:t.a2.tone(40),onSecondary:t.a2.tone(100),secondaryContainer:t.a2.tone(90),onSecondaryContainer:t.a2.tone(10),tertiary:t.a3.tone(40),onTertiary:t.a3.tone(100),tertiaryContainer:t.a3.tone(90),onTertiaryContainer:t.a3.tone(10),error:t.error.tone(40),onError:t.error.tone(100),errorContainer:t.error.tone(90),onErrorContainer:t.error.tone(10),background:t.n1.tone(99),onBackground:t.n1.tone(10),surface:t.n1.tone(99),onSurface:t.n1.tone(10),surfaceVariant:t.n2.tone(90),onSurfaceVariant:t.n2.tone(30),outline:t.n2.tone(50),outlineVariant:t.n2.tone(80),shadow:t.n1.tone(0),scrim:t.n1.tone(0),inverseSurface:t.n1.tone(20),inverseOnSurface:t.n1.tone(95),inversePrimary:t.a1.tone(80)})}static darkFromCorePalette(t){return new ne({primary:t.a1.tone(80),onPrimary:t.a1.tone(20),primaryContainer:t.a1.tone(30),onPrimaryContainer:t.a1.tone(90),secondary:t.a2.tone(80),onSecondary:t.a2.tone(20),secondaryContainer:t.a2.tone(30),onSecondaryContainer:t.a2.tone(90),tertiary:t.a3.tone(80),onTertiary:t.a3.tone(20),tertiaryContainer:t.a3.tone(30),onTertiaryContainer:t.a3.tone(90),error:t.error.tone(80),onError:t.error.tone(20),errorContainer:t.error.tone(30),onErrorContainer:t.error.tone(80),background:t.n1.tone(10),onBackground:t.n1.tone(90),surface:t.n1.tone(10),onSurface:t.n1.tone(90),surfaceVariant:t.n2.tone(30),onSurfaceVariant:t.n2.tone(80),outline:t.n2.tone(60),outlineVariant:t.n2.tone(30),shadow:t.n1.tone(0),scrim:t.n1.tone(0),inverseSurface:t.n1.tone(90),inverseOnSurface:t.n1.tone(20),inversePrimary:t.a1.tone(40)})}constructor(t){this.props=t}toJSON(){return{...this.props}}}class oe extends re{constructor(t,e,r){super({sourceColorArgb:t.toInt(),variant:Et.EXPRESSIVE,contrastLevel:r,isDark:e,primaryPalette:Ut.fromHueAndChroma(at(t.hue+120),40),secondaryPalette:Ut.fromHueAndChroma(re.getRotatedHue(t,oe.hues,oe.secondaryRotations),24),tertiaryPalette:Ut.fromHueAndChroma(re.getRotatedHue(t,oe.hues,oe.tertiaryRotations),32),neutralPalette:Ut.fromHueAndChroma(t.hue,8),neutralVariantPalette:Ut.fromHueAndChroma(t.hue,12)})}}oe.hues=[0,21,51,121,151,191,271,321,360],oe.secondaryRotations=[45,95,45,20,45,90,45,45,45],oe.tertiaryRotations=[120,120,20,45,20,15,20,120,120];class se extends re{constructor(t,e,r){super({sourceColorArgb:t.toInt(),variant:Et.VIBRANT,contrastLevel:r,isDark:e,primaryPalette:Ut.fromHueAndChroma(t.hue,200),secondaryPalette:Ut.fromHueAndChroma(re.getRotatedHue(t,se.hues,se.secondaryRotations),24),tertiaryPalette:Ut.fromHueAndChroma(re.getRotatedHue(t,se.hues,se.tertiaryRotations),32),neutralPalette:Ut.fromHueAndChroma(t.hue,8),neutralVariantPalette:Ut.fromHueAndChroma(t.hue,12)})}}se.hues=[0,41,61,101,131,181,251,301,360],se.secondaryRotations=[18,15,10,12,15,18,15,12,12],se.tertiaryRotations=[35,30,20,25,30,35,30,25,25];class ae{constructor(){}static score(t,e=!1){let r=0;for(const e of t.values())r+=e;const n=new Map,o=new Map,s=new Array(360).fill(0);for(const[e,a]of t.entries()){const t=a/r;n.set(e,t);const i=kt.fromInt(e);o.set(e,i),s[Math.round(i.hue)]+=t}const a=new Map;for(const[t,e]of o.entries()){const r=Math.round(e.hue);let n=0;for(let t=r-15;t<r+15;t++)n+=s[(i=t,(i%=360)<0&&(i+=360),i)];a.set(t,n)}var i;const h=new Map;for(const[t,e]of o.entries()){const r=100*a.get(t)*ae.WEIGHT_PROPORTION,n=e.chroma<ae.TARGET_CHROMA?ae.WEIGHT_CHROMA_BELOW:ae.WEIGHT_CHROMA_ABOVE,o=r+(e.chroma-ae.TARGET_CHROMA)*n;h.set(t,o)}const c=e?ae.filterContent(o):ae.filter(a,o),l=new Map;for(const t of c){let e=!1;const r=o.get(t).hue;for(const[t]of l)if(it(r,o.get(t).hue)<15){e=!0;break}e||l.set(t,h.get(t))}const u=Array.from(l.entries());u.sort(((t,e)=>e[1]-t[1]));const d=u.map((t=>t[0]));return 0===d.length&&d.push(4282549748),d}static filter(t,e){const r=new Array;for(const[n,o]of e.entries()){const e=t.get(n);o.chroma>=ae.CUTOFF_CHROMA&&bt(n)>=ae.CUTOFF_TONE&&e>=ae.CUTOFF_EXCITED_PROPORTION&&r.push(n)}return r}static filterContent(t){return Array.from(t.keys())}}function ie(t){const e=ft(t),r=gt(t),n=pt(t),o=[e.toString(16),r.toString(16),n.toString(16)];for(const[t,e]of o.entries())1===e.length&&(o[t]="0"+e);return"#"+o.join("")}function he(t){return parseInt(t,16)}function ce(t,e=[]){const r=Bt.of(t);return{source:t,schemes:{light:ne.light(t),dark:ne.dark(t)},palettes:{primary:r.a1,secondary:r.a2,tertiary:r.a3,neutral:r.n1,neutralVariant:r.n2,error:r.error},customColors:e.map((e=>function(t,e){let r=e.value;const n=r,o=t;e.blend&&(r=Dt.harmonize(n,o));const s=Bt.of(r).a1;return{color:e,value:r,light:{color:s.tone(40),onColor:s.tone(100),colorContainer:s.tone(90),onColorContainer:s.tone(10)},dark:{color:s.tone(80),onColor:s.tone(20),colorContainer:s.tone(30),onColorContainer:s.tone(90)}}}(t,e)))}}async function le(t,e=[]){const r=await async function(t){const e=await new Promise(((e,r)=>{const n=document.createElement("canvas"),o=n.getContext("2d");if(!o)return void r(new Error("Could not get canvas context"));const s=()=>{n.width=t.width,n.height=t.height,o.drawImage(t,0,0);let r=[0,0,t.width,t.height];const s=t.dataset.area;s&&/^\d+(\s*,\s*\d+){3}$/.test(s)&&(r=s.split(/\s*,\s*/).map((t=>parseInt(t,10))));const[a,i,h,c]=r;e(o.getImageData(a,i,h,c).data)};t.complete?s():t.onload=s})),r=[];for(let t=0;t<e.length;t+=4){const n=e[t],o=e[t+1],s=e[t+2];if(e[t+3]<255)continue;const a=dt(n,o,s);r.push(a)}const n=ee.quantize(r,128);return ae.score(n)[0]}(t);return ce(r,e)}function ue(t,e,r=""){for(const[n,o]of Object.entries(e.toJSON())){const e=n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),s=ie(o);t.style.setProperty(`--md-sys-color-${e}${r}`,s)}}ae.TARGET_CHROMA=48,ae.WEIGHT_PROPORTION=.7,ae.WEIGHT_CHROMA_ABOVE=.3,ae.WEIGHT_CHROMA_BELOW=.1,ae.CUTOFF_CHROMA=15,ae.CUTOFF_TONE=10,ae.CUTOFF_EXCITED_PROPORTION=.01;class de extends et{static properties={sourceImage:{type:String,reflect:!0},sourceHex:{type:String,reflect:!0},sourceRgb:{type:String,reflect:!0},dark:{type:Boolean,reflect:!0},light:{type:Boolean,reflect:!0},global:{type:Boolean,reflect:!0}};_checkColorScheme(){this.dark&&this.light?this.darkMode=window.matchMedia("(prefers-color-scheme: dark)").matches:this.light?this.darkMode=!1:this.dark?this.darkMode=!0:this.darkMode=window.matchMedia("(prefers-color-scheme: dark)").matches}_applyTheme(t){!function(t,e){const r=e?.target||document.body;if(ue(r,e?.dark?t.schemes.dark:t.schemes.light),e?.brightnessSuffix&&(ue(r,t.schemes.dark,"-dark"),ue(r,t.schemes.light,"-light")),e?.paletteTones){const n=e?.paletteTones??[];for(const[e,o]of Object.entries(t.palettes)){const t=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();for(const e of n){const n=`--md-ref-palette-${t}-${t}${e}`,s=ie(o.tone(e));r.style.setProperty(n,s)}}}}(t,{dark:this.darkMode,target:this.global?document.body:this})}async _setColorsFromImage(){let t=null;this.sourceImage?(t=document.createElement("img"),t.src=this.sourceImage):t=this.querySelector("img"),t.crossOrigin="Anonymous";const e=await le(t);this._applyTheme(e)}async _setColorsFromHex(){const t=ce(function(t){const e=3===(t=t.replace("#","")).length,r=6===t.length,n=8===t.length;if(!e&&!r&&!n)throw new Error("unexpected hex "+t);let o=0,s=0,a=0;return e?(o=he(t.slice(0,1).repeat(2)),s=he(t.slice(1,2).repeat(2)),a=he(t.slice(2,3).repeat(2))):r?(o=he(t.slice(0,2)),s=he(t.slice(2,4)),a=he(t.slice(4,6))):n&&(o=he(t.slice(2,4)),s=he(t.slice(4,6)),a=he(t.slice(6,8))),(255<<24|(255&o)<<16|(255&s)<<8|255&a)>>>0}(this.sourceHex));this._applyTheme(t)}async _setColorsFromRgb(){const t=ce(dt(this.sourceRgb));this._applyTheme(t)}_setColors(){this._checkColorScheme();try{this.sourceImage?this._setColorsFromImage():this.sourceHex?this._setColorsFromHex():this.sourceRgb?this._setColorsFromRgb():this._setColorsFromImage()}catch(t){console.error("Something went wrong generating your dynamic color scheme",t)}}updated(){this._setColors()}refresh(){this._setColors()}constructor(){super()}connectedCallback(){super.connectedCallback(),this._setColors()}render(){return H`
            <slot></slot>
        `}}customElements.define("dynamic-color",de)})();